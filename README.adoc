= jcli
:nofooter:

Sugared wrappers to execute methods from JDK and JVM-based libraries from the command line.

E.g., To generate a UUID, `java.util.UUID` contains a method `randomUUID()`. This tool helps you execute that method by invoking `jcli uuid randomUUID`.

== Motivation
The goal is to expose the wealth of utility methods available in the JVM ecosystem right at the command line.

It is also intended that this be a GraalVM-compatible project so that distributions do not require the end user to do a JVM setup with some compatible Java version.

Most methods return a single result, and so can be used in pipe operations combined with other command line utilities if needed.

== Available Commands

The CLI structure maps directly to Java classes:
- `jcli string` -> `java.lang.String`
- `jcli uuid` -> `java.util.UUID`
- `jcli instant` -> `java.time.Instant`

In order to view the available methods for a command, you can use the `--methods` flag.

E.g., `jcli instant --methods`
```
...
now()
parse(CharSequence)
isAfter(Instant)
plusSeconds(long)
...
```

Here are some examples of valid commands:

[cols="1,1,1,1"]
|===
|SubCommand | Method | Description | Usage

|uuid
|`randomUUID`
|Generates a random UUID
|`jcli uuid randomUUID`

|instant
|`now`
|Prints the current time (ISO-8601)
|`jcli instant now`

|instant
|`parse`
|Parses a string text to Instant
|`jcli instant parse '2023-01-01T00:00:00Z'`

|string
|`substring`
|Extracts substring from text
|`jcli string substring 'hello world' 0 5`
|===

=== Smart Instance Resolution
For instance methods (like `Instant.getNano()` or `String.length()`), `jcli` creates an instance automatically if needed.
- `jcli instant getNano` -> Defaults to `Instant.now().getNano()`
- `jcli instant getNano 2023-01-01T00:00:00Z` -> Uses the provided timestamp instance.

== Build

To build this project's source code:

. Clone this project
. At the root of the project, execute `./gradlew clean build`
. The build generates a jar at `build/libs`. To execute the cli app, run `java -jar build/libs/jcli-0.1-all.jar -h` to view the help manual.
. Or, create an alias like this. `alias jcli='java -jar build/libs/jcli-0.1-all.jar'`
Then run, `jcli -h`.

== Build Native Image
 
 . Install and Use GraalVM for JDK 21
 . Compile Native Image
 .. NativeCompile may take a few minutes
 
 ```
 sdk install java 21.0.1-graal
 sdk use java 21.0.1-graal
 ./gradlew nativeCompile
 ```
 
 The default output directory is `build/native/nativeCompile`.
 
 Here is how you can execute the native file.
 ```
 $ ./build/native/nativeCompile/jcli --help
 Usage: jcli [-hvV] [COMMAND]
 Sugared wrappers to execute methods of JDK and JVM-based libraries from the
 command line.
   -h, --help      Show this help message and exit.
   -v, --verbose   Print welcome message.
   -V, --version   Print version information and exit.
 Commands:
   instant  Methods from java.time.Instant.
   uuid     Methods from java.util.UUID.
   string   Methods from java.lang.String.
 ```
 
 An example command:
 
 `$ ./build/native/nativeCompile/jcli instant now`